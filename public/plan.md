You are a senior Laravel architect and system designer.
You are helping me build a production-ready web-based e-ticketing system for concert events.

Tech stack:
- Laravel v11 (latest stable) (installed)
- Laravel Filament v3 (admin panel) (installed)
- Filament Shield for roles & permissions (installed)
- MySQL
- Midtrans payment gateway
- QR Code & Barcode generation
- No consumer authentication (guest purchase)

System overview:
This is a multi-client e-ticketing system where the super admin manages clients (event organizers), events, tickets, promo codes, and system users.

DO NOT generate frontend UI code for consumers.
Focus on backend logic, database design, services, policies, and API endpoints.
Use clean architecture and best practices.

====================
CORE CONCEPTS
====================

1. ROLES & ACCESS
- super_admin (full access, Filament)
- client (Filament, limited to own events & data)
- wristband_exchange_officer (non-Filament login, QR scan for ticket-to-wristband exchange)
- wristband_validator (non-Filament login, QR scan to validate wristband entry)

Notes:
- Client, wristband_exchange_officer, and wristband_validator accounts are auto-generated by super_admin.
- Client can only see and manage data related to their own events.
- Scanner roles access only scanner pages (no Filament).

====================
EVENT & TICKET FLOW
====================

2. EVENT
- Created only by super_admin
- Belongs to one client
- Has ticket categories (VIP, Festival, etc)
- Has quota per ticket category
- Event status: draft, published, closed

3. TICKET GENERATION
- Tickets are generated automatically after successful payment
- One QR Code per ticket
- Each QR code is unique and immutable
- Ticket lifecycle:
  - created
  - paid
  - exchanged_for_wristband
  - used / validated

====================
CONSUMER PURCHASE FLOW
====================

4. PURCHASE (NO LOGIN)
Consumers:
- Do NOT create accounts
- Must fill:
  - full_name
  - identity_type (KTP, SIM, Student Card, Passport)
  - identity_number
  - email
  - whatsapp_number

Flow:
- Select event & ticket quantity
- Optional promo code
- Checkout
- Pay via Midtrans
- After payment success:
  - Order is created
  - Tickets are generated
  - Invoice PDF is generated
  - Invoice contains QR Codes for each ticket

5. ORDER TRACKING
Consumers can:
- Track order by identity_number
- Download invoice
- See ticket status

====================
PROMO CODE SYSTEM
====================

6. PROMO CODE
- Created by super_admin
- Assigned to specific event
- Discount type:
  - fixed amount
  - percentage
- Has quota (usage limit)
- Auto-disabled when quota reached
- Promo validation happens before payment

====================
QR SCANNING SYSTEM
====================

7. WRISTBAND EXCHANGE SCAN
- Scan QR Code
- Validate ticket:
  - Must be paid
  - Must not be exchanged before
- Mark ticket as exchanged_for_wristband
- Log exchange history
- If scanned again → show warning: "Ticket already exchanged"

8. WRISTBAND VALIDATION SCAN
- Scan wristband QR / barcode
- Validate:
  - Wristband must be exchanged
  - Must not be used
- Mark ticket as used
- If scanned again → show warning: "Ticket already used"

Notes:
- Scanner users DO NOT access Filament
- Filament users DO NOT access scanner pages
- Use middleware & policies to enforce access
- UI is separated, backend is shared
- Use bootstrap 5 for UI (for scanner pages)

====================
PAYMENT
====================

9. PAYMENT (MIDTRANS)
- Use Midtrans Snap
- Handle callbacks securely
- Payment statuses:
  - pending
  - success
  - failed
  - expired
- Only generate tickets after payment success
- Use webhook signature verification

====================
TECHNICAL REQUIREMENTS
====================

10. BACKEND DESIGN
- Use:
  - Service classes
  - Policies
  - Form Requests
  - Database transactions
- Avoid fat controllers
- Use UUID where appropriate
- Add audit logs for scan activities

11. DATABASE
Design normalized tables for:
- users
- roles & permissions
- clients
- events
- ticket_categories
- tickets
- orders
- order_items
- promo_codes
- promo_code_usages
- scan_logs

====================
WHAT I WANT FROM YOU
====================

Step by step:
1. Design database schema (migrations)
2. Define Eloquent relationships
3. Design services for:
   - OrderService
   - TicketService
   - PromoService
   - PaymentService
   - ScanService
4. Define policies & access rules
5. Generate sample Laravel code when appropriate

Do NOT assume features outside this scope.
Ask questions only if absolutely necessary.
Always follow Laravel & Filament best practices.
